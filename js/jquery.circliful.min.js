(function(a){a.fn.circliful=function(b,d){var c=a.extend({fgcolor:"#556b2f",bgcolor:"#eee",fill:false,width:15,dimension:200,fontsize:15,percent:50,animationstep:1,iconsize:"20px",iconcolor:"#999",border:"default",complete:null,bordersize:"2px"},b);return this.each(function(){var A=["fgcolor","bgcolor","fill","width","dimension","fontsize","animationstep","endPercent","icon","iconcolor","iconsize","border","bordersize"];var f={};var H="";var n=0;var u=a(this);var D=false;var z,I;u.addClass("circliful");e(u);if(u.data("text")!=undefined){z=u.data("text");if(u.data("icon")!=undefined){H=a("<i></i>").addClass("fa "+a(this).data("icon")).css({color:f.iconcolor,"font-size":f.iconsize})}if(u.data("type")!=undefined){j=a(this).data("type");if(j=="half"){t(u,"circle-text-half",(f.dimension/1.45))}else{t(u,"circle-text",f.dimension)}}else{t(u,"circle-text",f.dimension)}}if(a(this).data("total")!=undefined&&a(this).data("part")!=undefined){var K=a(this).data("total")/100;percent=((a(this).data("part")/K)/100).toFixed(3);n=(a(this).data("part")/K).toFixed(3)}else{if(a(this).data("percent")!=undefined){percent=a(this).data("percent")/100;n=a(this).data("percent")}else{percent=c.percent/100}}if(a(this).data("info")!=undefined){I=a(this).data("info");if(a(this).data("type")!=undefined){j=a(this).data("type");if(j=="half"){F(u,0.9)}else{F(u,1.25)}}else{F(u,1.25)}}a(this).width(f.dimension+"px");var i=a("<canvas></canvas>").attr({width:f.dimension,height:f.dimension}).appendTo(a(this)).get(0);var g=i.getContext("2d");var v=a(i).parent();var s=i.width/2;var r=i.height/2;var E=f.percent*360;var J=E*(Math.PI/180);var l=i.width/2.5;var C=2.3*Math.PI;var B=0;var G=false;var o=f.animationstep===0?n:0;var p=Math.max(f.animationstep,0);var w=Math.PI*2;var h=Math.PI/2;var j="";var k=true;if(a(this).data("type")!=undefined){j=a(this).data("type");if(j=="half"){C=2*Math.PI;B=3.13;w=Math.PI*1;h=Math.PI/0.996}}a(window).resize(q);function q(){console.log(a(i).width());console.log(a(v).width());a(i).attr("width",a(v).width());a(i).attr("height",a(v).height())}q();function t(L,x,y){a("<span></span>").appendTo(L).addClass(x).text(z).prepend(H).css({"line-height":y+"px","font-size":f.fontsize+"px"})}function F(y,x){a("<span></span>").appendTo(y).addClass("circle-info-half").css("line-height",(f.dimension*x)+"px").text(I)}function e(x){a.each(A,function(y,L){if(x.data(L)!=undefined){f[L]=x.data(L)}else{f[L]=a(c).attr(L)}if(L=="fill"&&x.data("fill")!=undefined){D=true}})}function m(x){g.clearRect(0,0,i.width,i.height);g.beginPath();g.arc(s,r,l,B,C,false);g.lineWidth=f.bordersize+1;g.strokeStyle=f.bgcolor;g.stroke();if(D){g.fillStyle=f.fill;g.fill()}g.beginPath();g.arc(s,r,l,-(h),((w)*x)-h,false);if(f.border=="outline"){g.lineWidth=f.width+13}else{if(f.border=="inline"){g.lineWidth=f.width-13}}g.strokeStyle=f.fgcolor;g.stroke();if(o<n){o+=p;requestAnimationFrame(function(){m(Math.min(o,n)/100)},u)}if(o==n&&k&&typeof(b)!="undefined"){if(a.isFunction(b.complete)){b.complete();k=false}}}m(o/100)})}}(jQuery));